@model List<MVC_SchoolProject.Models.AdminModel>
@{
    ViewData["Title"] = "Admin Users";
}

<h2 class="text-center mt-4">@ViewData["Title"]</h2>

<div class="container mt-3">
    <div class="row justify-content-center">
        <div class="col-md-12">
            <input type="text" id="searchInput" class="form-control mb-3" placeholder="Search usernames, classes, etc...">

            <div class="card shadow-sm">
                <div class="card-body">
                    <table class="table table-bordered table-striped" id="myDataTable">
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="checkAll" /></th>
                                <th>UUID</th>
                                <th>Username</th>
                                <th>Amount</th>
                                <th>Number of Pages</th>
                                <th>Class</th>
                                <th>Department</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var user in Model)
                            {
                                <tr>
                                    <td><input type="checkbox" name="selectedUsers" value="@user.Uuid" /></td>
                                    <td>@user.Uuid</td>
                                    <td>@user.UserName</td>
                                    <td>@Html.DisplayFor(modelItem => user.Amount, "{0:C}")</td>
                                    <td>@user.NbrPage</td>
                                    <td>@user.Class</td>
                                    <td>@user.DepartmentId</td>
                                    <td>
                                        <a href="@Url.Action("ViewTransactions", "Admin", new { username = @user.UserName })" class="btn btn-info">View Transactions</a>
                                    </td>

                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <div class="card-footer text-center">
                    <a href="@Url.Action("CreateUser", "Admin")" class="btn btn-primary">Add New User</a>
                    <a href="@Url.Action("AddAmountUser", "Admin")" class="btn btn-secondary">Add amount to an user</a>
                    <a href="@Url.Action("AddAmountClass", "Admin")" class="btn btn-secondary">Add amount by class</a>
                    <a href="@Url.Action("AddAmountAll", "Admin")" class="btn btn-secondary">Add amount to all</a>
                    <a href="@Url.Action("", "")" class="btn btn-secondary">Back to Home</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script>
    $(document).ready(function () {
        // Filter function for search input
        $("#searchInput").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#myDataTable tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });

        // Checkbox "Select All" functionality
        $("#checkAll").click(function () {
            $('input[name="selectedUsers"]').prop('checked', this.checked);
        });
    });
</script>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">